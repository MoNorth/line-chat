!function(t){function e(i){if(a[i])return a[i].exports;var n=a[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,a){t.exports=a(1)},function(t,e,a){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,a,i){return a&&t(e.prototype,a),i&&t(e,i),e}}(),r=function(){function t(e,a){if(i(this,t),a){var n=Object.prototype.toString.call(e);if("[object String]"===n)this.dom=e,this.$=document.querySelector(e);else{if("[object Object]"!==n)throw"dom非法";this.dom=n.id||"",this.$=n}}else a=e,this.dom="#line-chat",this.$=document.querySelector(this.dom);this.param={type:"line",width:"100%",height:"100%",space:20,line:{style:"#fff",width:1,arcR:2,num:4,alpha:1},point:{outStyle:"#fff",inStyle:"#0FC69B",outR:6,inR:4,alpha:1},Bezier:{style:"#fff",width:2,alpha:1,bg:"#3477BB",bgAlpha:1},data:{y:[0,0],hasPoint:[]},shan:{sr:30,scolor:"#fff",color:[]}},this._extend(this.param,a)}return n(t,[{key:"_extend",value:function(t,e){for(var a in e){var i=Object.prototype.toString.call(e[a]);"[object Array]"===i||"[object Object]"===i?this._extend(t[a],e[a]):t[a]=e[a]}}},{key:"init",value:function(){var t=this.canvas=document.createElement("canvas"),e=this.$.clientWidth,a=this.$.clientHeight;if(~(this.param.width+"").indexOf("%")){var i=parseInt(this.param.width);t.width=e*i/100}else t.width=this.param.width;if(~(this.param.height+"").indexOf("%")){var n=parseInt(this.param.height);t.height=a*n/100}else t.height=this.param.height;if(!t.getContext)throw"浏览器不支持";switch(this.ctx=t.getContext("2d"),this.param.type){case"shan":this.drawShan();break;default:this.drawLine()}this.$.appendChild(t)}},{key:"drawShan",value:function(){this._computeArc(),this.computeShanData=this._computeShanData(),this._drawShan()}},{key:"_drawShan",value:function(){var t=this,e=this.param.shan,a=e.sr,i=e.color,n=e.br,r=e.x,h=e.y,o=e.scolor;this.computeShanData.forEach(function(e,a){t._drawShanB(r,h,n,e.begin,e.end,i[a])}),this._drawShanB(r,h,a,0,2*Math.PI,o)}},{key:"_drawShanB",value:function(t,e,a,i,n,r){var h=this.ctx;r||(r=this.getRandomColor()),h.save(),h.beginPath(),h.moveTo(t,e),h.fillStyle=r,h.arc(t,e,a,i,n),h.fill(),h.closePath(),h.restore()}},{key:"getRandomColor",value:function(){return"#"+[0,0,0,0,0,0].map(function(){return"0123456789abcdef".charAt(Math.floor(16*Math.random()))}).join("")}},{key:"_computeShanData",value:function(){var t=this.param.data.y||[],e=t.reduce(function(t,e){return t+e}),a=2*Math.PI,i=0;return t.map(function(t){var n=i,r=i+t/e*a;return i=r,{begin:n,end:r}})}},{key:"_computeArc",value:function(){var t=this.canvas.width,e=this.canvas.height;this.param.shan.br=t>e?e/2:t/2,this.param.shan.x=t/2,this.param.shan.y=e/2}},{key:"drawLine",value:function(){this._drawLine(),this.computedPoint=this._compute(),this.drawPoint=this._getControlPoint(this.computedPoint),this._drawBezier(),this._drawPoint()}},{key:"_drawBezier",value:function(){var t=this.ctx,e=this.computedPoint,a=this.drawPoint,i=this.param.Bezier,n=i.style,r=i.width,h=i.alpha,o=i.bg,s=i.bgAlpha;t.save(),t.beginPath(),t.strokeStyle=n,t.lineWidth=r,t.globalAlpha=h,t.fillStyle=o,t.moveTo(e[0].x,e[0].y),a.forEach(function(e){var a=e.cp1x,i=e.cp1y,n=e.cp2x,r=e.cp2y,h=e.x,o=e.y;t.bezierCurveTo(a,i,n,r,h,o)}),t.stroke(),t.globalAlpha=s,t.lineTo(this.canvas.width-this.param.point.outR,this.canvas.height-this.param.line.arcR),t.lineTo(this.param.point.outR,this.canvas.height-this.param.line.arcR),t.lineTo(e[0].x,e[0].y),t.fill(),t.closePath(),t.restore()}},{key:"_drawLine",value:function(){var t=this._getPointByLine(),e=this.ctx,a=this.param.line,i=a.style,n=a.width,r=a.arcR,h=a.alpha;e.save(),e.beginPath(),e.strokeStyle=i,e.fillStyle=i,e.lineWidth=n,e.globalAlpha=h,t.forEach(function(t){e.moveTo(t.x1,t.y1),e.lineTo(t.x2,t.y2)}),e.stroke(),t.forEach(function(t){e.moveTo(t.x1,t.y1),e.arc(t.x1,t.y1,r,0*Math.PI,2*Math.PI),e.moveTo(t.x1,t.y1),e.arc(t.x2,t.y2,r,0*Math.PI,2*Math.PI)}),e.fill(),e.closePath(),e.restore()}},{key:"_drawPoint",value:function(){var t=this.computedPoint,e=this.ctx,a=this.param.point,i=a.outStyle,n=a.inStyle,r=a.outR,h=a.inR,o=a.alpha,s=this.param.data.hasPoint;e.save(),e.beginPath(),e.fillStyle=i,e.globalAlpha=o,t.forEach(function(t,a){~s.indexOf(a)&&(e.moveTo(t.x,t.y),e.arc(t.x,t.y,r,0*Math.PI,2*Math.PI))}),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=n,t.forEach(function(t,a){~s.indexOf(a)&&(e.moveTo(t.x,t.y),e.arc(t.x,t.y,h,0*Math.PI,2*Math.PI))}),e.fill(),e.closePath(),e.restore()}},{key:"_getPointByLine",value:function(){for(var t=[],e=this.param.line,a=e.num,i=e.arcR,n=this.param.point.outR,r=this.canvas.width-(n-i),h=this.canvas.height-2*i,o=h/a,s=i;s<=h+2*i;)t.push({x1:n-i,y1:s,x2:r,y2:s}),s+=o;return t}},{key:"_compute",value:function(){var t=this,e=this.param.data.y||[],a=this.param.point.outR,i=e.length,n=this.canvas.height/2-this.param.space,r=this.canvas.width-2*a,h=r/(i-1),o=a,s=n/Math.abs(this._findMax(e)-e[0]);return e.map(function(a){return(e[0]-a)*s+n+t.param.space}).map(function(t){var e=o;return o+=h,{x:e,y:t}})}},{key:"_findMax",value:function(t){var e=t.concat([]);return e.sort(function(e,a){return Math.abs(a-t[0])-Math.abs(e-t[0])}),e[0]||1}},{key:"_getControlPoint",value:function(t){var e=0,a=t.length-2,i=[],n=this.computedPoint;if(a<1)return n.map(function(t){return{cp1x:t.x,cp1y:t.y,cp2x:t.x,cp2y:t.y,x:t.x,y:t.y}});for(;e<a;e++){var r=t[e],o=t[e+1],s=t[e+2],c=new h(r.x-o.x,r.y-o.y),l=new h(s.x-o.x,s.y-o.y),u=c.length(),p=l.length(),y=c.normalize().add(l.normalize()).normalize(),f=new h(y.y,-1*y.x),d=new h(-1*y.y,y.x);if(f.angle(c)<90){var x=f.multiply(.3*u).add(o),m=d.multiply(.3*p).add(o);i.push(x,m)}else{var v=f.multiply(.3*p).add(o),g=d.multiply(.3*u).add(o);i.push(g,v)}}var w=[];return e=0,n.forEach(function(t,a){a===n.length-1?w.push({cp1x:i[e].x,cp1y:i[e].y,cp2x:t.x,cp2y:t.y,x:t.x,y:t.y}):0===a||(1===a?(w.push({cp1x:i[e].x,cp1y:i[e].y,cp2x:t.x,cp2y:t.y,x:t.x,y:t.y}),e+=1):(w.push({cp1x:i[e].x,cp1y:i[e].y,cp2x:i[e+1].x,cp2y:i[e+1].y,x:t.x,y:t.y}),e+=2))}),w}}]),t}();e.default=r;var h=function(){function t(e,a){i(this,t),this.x=e,this.y=a}return n(t,[{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"normalize",value:function(){var e=1/this.length();return new t(this.x*e,this.y*e)}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"multiply",value:function(e){return new t(this.x*e,this.y*e)}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"angle",value:function(t){return 180*Math.acos(this.dot(t)/(this.length()*t.length()))/Math.PI}}]),t}();window&&(window.lineChat=r)}]);